<div class="page">
    <div class="container container--big">
      <div class="description">
        <h1 class="description__title">Certificate Service</h1>
        <p class="description__intro">Welcome to the website of the Sample Trust Service
          Provider.</p>
        <div class="description__text">
          We issue Qualified Website Authentication Certificates (QWAC) to Payment Service Providers
          (PSP) in order to use services offered at the Access-to-Account (XS2A) interface of the
          adorsys Sandbox Environment.
          <br>
          Usually each PSP has to be registered at the National Competent Authority (NCA) to receive
          an Authorisation Number. We allow you to skip this step and define a fake Authorisation
          Number yourself.
          <br>
          Performing the Certificate Service will generate a shared cryptographic key pair signed by
          the adorsys Sample Trust Service Provider. The Public Key which is also referred to a QWAC
          must be used for authentication purposes at XS2A.
        </div>
      </div>
      <form #certForm="ngForm" (ngSubmit)="createAndDownloadCert()">
            <div class="row">

              <div class="col-sm-6">
                  <label>
                  Authorization Number*
                  </label>
              <input type="text" name="authorizationNumber" required class="form-control"
                     [(ngModel)]="certData.authorizationNumber">
              </div>

              <div class="col-sm-6">
                <label>
                  Country
                </label>
                <input type="text" name="countryName" class="form-control"
                       [(ngModel)]="certData.countryName">
              </div>


              <div class="col-sm-6">
                <label>
                  State
                </label>
                <input type="text" name="stateOrProvinceName" class="form-control"
                       [(ngModel)]="certData.stateOrProvinceName">
              </div>

              <div class="col-sm-6">
                <label>
                  City
                </label>
                <input type="text" name="localityName" class="form-control"
                       [(ngModel)]="certData.localityName">
              </div>

              <div class="col-sm-6">
                <label>
                  Domain
                </label>
                <input type="text" name="domainComponent" class="form-control"
                       [(ngModel)]="certData.domainComponent">
              </div>

              <div class="col-sm-6">
                <label>
                  Organization Name*
                </label>
                <input type="text" name="organizationName" class="form-control" required
                       [(ngModel)]="certData.organizationName">
              </div>

              <div class="col-sm-6">
                <label>
                  Organization Unit
                </label>
                <input type="text" name="organizationUnit" class="form-control"
                       [(ngModel)]="certData.organizationUnit">
              </div>


              <div class="col-sm-6">
                <label>
                  Validity
                </label>
                <input type="text" name="validity" required class="form-control"
                       [(ngModel)]="certData.validity">
              </div>

              <div class="col-sm-6">
                <label>
                  Roles of PSP*
                </label>
                <div class="form-group">
                  <div *ngFor="let pspRole of pspRolesKeys" class="d-inline">
                    <label>
                      <input name="{{pspRole}}" type="checkbox" (change)="onSelectPspRole(pspRole)"
                             [checked]="isPspRoleSelected(pspRole)">
                      {{pspRole}}
                    </label>
                  </div>
                </div>
              </div>
          </div>

        <div class="col-xm-6">
          <div class="form-group">
            <label for="pspRolesKeys" class="col-xs-4">Options</label>
            <div class="checkbox"  formGroupName="options" *ngFor="let pspRole of pspRolesKeys">
              <div class="col-xs-4">
                <input id="{{option}}" formControlName="{{option}}" type="checkbox"
                       [checked]=false> {{option}}
              </div>
            </div>
          </div>
        </div>

        <div class="clearfix">
          <button type="submit" class="btn btn-primary float-right" [disabled]="certForm.invalid">
            Confirm
          </button>
        </div>

        <div *ngIf="error">
          <ul class="alert alert-warning">
            <li class="list-inline" *ngFor="let error of error.error.errors">
              {{error.field}}: {{error.defaultMessage}}
            </li>
          </ul>
        </div>


      </form>
    </div>
</div>
